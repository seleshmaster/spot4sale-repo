<div class="tabs">
  <button class="tab-button" [class.active]="filter() === 'PENDING'" (click)="filter.set('PENDING')">
    <i class="tab-icon fas fa-hourglass-half"></i>
    <span class="tab-text">Pending</span>
  </button>

  <button class="tab-button" [class.active]="filter() === 'PAID'" (click)="filter.set('PAID')">
    <i class="tab-icon fas fa-dollar-sign"></i>
    <span class="tab-text">Paid</span>
  </button>

  <button class="tab-button" [class.active]="filter() === 'CONFIRMED'" (click)="filter.set('CONFIRMED')">
    <i class="tab-icon fas fa-check-double"></i>
    <span class="tab-text">Confirmed</span>
  </button>

  <button class="tab-button" [class.active]="filter() === 'REFUNDED'" (click)="filter.set('REFUNDED')">
    <i class="tab-icon fas fa-undo"></i>
    <span class="tab-text">Refunded</span>
  </button>

  <button class="tab-button" [class.active]="filter() === 'COMPLETED'" (click)="filter.set('COMPLETED')">
    <i class="tab-icon fas fa-check-circle"></i>
    <span class="tab-text">Completed</span>
  </button>

  <button class="tab-button" [class.active]="filter() === 'CANCELLED'" (click)="filter.set('CANCELLED')">
    <i class="tab-icon fas fa-times-circle"></i>
    <span class="tab-text">Cancelled</span>
  </button>
</div>

<div class="booking-grid">
  <div class="booking-card" *ngFor="let b of filtered()">
    <div class="card-header">Spot</div>
    <div class="booking-info">
      <div class="dates">{{ b.startDate }} â†’ {{ b.endDate }}</div>
      <div class="muted">Booking ID: {{ b.id }}</div>
    </div>

    <div class="booking-actions">
      <span class="badge"
            [class.pending]="b.status==='PENDING'"
            [class.paid]="b.status==='PAID'"
            [class.cancelled]="b.status==='CANCELLED'"
            [class.confirmed]="b.status==='CONFIRMED'"
            [class.refunded]="b.status==='REFUNDED'"
            [class.completed]="b.status==='COMPLETED'">
        {{ b.status }}
      </span>

      <div class="total" *ngIf="b.totalPrice != null">
        {{ b.totalPrice | currency:'USD':'symbol':'1.0-0' }}
      </div>

      <!-- Cancel button (only for PENDING or PAID) -->
      <button
        *ngIf="b.status==='PENDING' || b.status==='PAID'"
        class="cancel-btn"
        (click)="cancel(b)"
        [disabled]="busy()">
        Cancel
      </button>

      <!-- View / Pay link under the Cancel button -->
      <a *ngIf="b.status==='PENDING'"
         class="link"
         [routerLink]="['/booking/confirm', b.id]">
        Pay
      </a>
    </div>
  </div>
</div>

<div *ngIf="filtered().length === 0" class="muted no-bookings">No bookings found.</div>
