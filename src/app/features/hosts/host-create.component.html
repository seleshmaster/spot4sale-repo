<form #f="ngForm" (ngSubmit)="submit(f)" class="host-form">
  <h2>Create a Host</h2>

  <!-- Name -->
  <label>
    <span>Name</span>
    <input type="text" name="name" [(ngModel)]="model.name" required />
  </label>

  <!-- Address -->
  <label>
    <span>Address</span>
    <input type="text" name="address" [(ngModel)]="model.address" required />
  </label>

  <div class="row">
    <label>
      <span>City</span>
      <input type="text" name="city" [(ngModel)]="model.city" required />
    </label>

    <label>
      <span>ZIP</span>
      <input type="text" name="zipCode" [(ngModel)]="model.zipCode" required />
    </label>
  </div>

  <!-- Description -->
  <label>
    <span>Description (optional)</span>
    <textarea name="description" [(ngModel)]="model.description" placeholder="Describe your host"></textarea>
  </label>

  <!-- Price and Max Booths -->
  <div class="row">
    <label>
      <span>Default Price (per day)</span>
      <input type="number" name="defaultPrice" [(ngModel)]="model.defaultPrice" step="0.01" />
    </label>
    <label>
      <span>Maximum Booths</span>
      <input type="number" name="maxBooths" [(ngModel)]="model.maxBooths" />
    </label>
  </div>

  <!-- Contact Info -->
  <div class="row">
    <label>
      <span>Contact Email</span>
      <input type="email" name="contactEmail" [(ngModel)]="model.contactEmail" />
    </label>
    <label>
      <span>Contact Phone</span>
      <input type="text" name="contactPhone" [(ngModel)]="model.contactPhone" />
    </label>
  </div>

  <!-- Host Type & Category side by side -->
  <div class="row">
    <label>
      <span>Host Type</span>
      <select name="hostTypeName" [(ngModel)]="model.hostTypeName" required>
        <option *ngFor="let type of hostTypes" [value]="type.name">{{ type.name }}</option>
      </select>
    </label>
    <label>
      <span>Host Category</span>
      <select name="hostCategoryName" [(ngModel)]="model.hostCategoryName" required>
        <option *ngFor="let cat of hostCategories" [value]="cat.name">{{ cat.name }}</option>
      </select>
    </label>
  </div>

  <!-- Amenities Checkboxes -->
  <fieldset>
    <legend>Amenities</legend>

    <!-- Select All -->
    <div class="checkbox-item">
      <input type="checkbox" [checked]="allSelected()" (change)="toggleSelectAll($event)" />
      <span>Select All</span>
    </div>

    <!-- Individual Amenities Grid -->
    <div class="amenities-grid">
      <div *ngFor="let amenity of amenities" class="checkbox-item">
        <input
          type="checkbox"
          [checked]="isSelected(amenity.id)"
          (change)="toggleAmenity($event, amenity.id)"
        />
        <span>{{ amenity.name }}</span>
      </div>
    </div>
  </fieldset>

  <!-- Tags -->
  <label class="spaced-label">
    <span>Tags (comma separated)</span>
    <input type="text" name="tags" [(ngModel)]="model.tags" placeholder="e.g., weekend, craft, vintage" />
  </label>

  <!-- Operating Hours -->
  <label>
    <span>Operating Hours (JSON format)</span>
    <textarea name="operatingHours" [(ngModel)]="model.operatingHours" placeholder='{"mon":"9-17","tue":"9-17"}'></textarea>
  </label>

  <!-- Upload Images -->
<!--  <label>-->
<!--    <span>Upload Images (optional, max 3)</span>-->
<!--    <input type="file" (change)="onFilesSelected($event)" multiple accept="image/*" />-->
<!--  </label>-->

  <label class="file-upload-label">
    <span>Upload Images </span>
    <input type="file" (change)="onFilesSelected($event)" multiple accept="image/*" />
  </label>

  <!-- Image Preview -->
  <div class="image-preview" *ngIf="previewImages.length">
    <div *ngFor="let img of previewImages; let i = index" class="preview-item">
      <img [src]="img" alt="preview" />
      <button type="button" (click)="removeImage(i)">Remove</button>
    </div>
  </div>

  <!-- Form Actions -->
  <div class="actions">
    <button type="submit" [disabled]="f.invalid || busy()">Create</button>
    <span *ngIf="error()" class="error">{{ error() }}</span>
  </div>
</form>
